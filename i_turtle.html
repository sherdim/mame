
<!DOCTYPE html>

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Работа с таблицами &#8212; Практикум по математическим методам в исследовательской деятельности</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/book.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="☑ Подготовка данных" href="w_turtle.html" />
    <link rel="prev" title="Cтандартизация данных" href="i_standart.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Практикум по математическим методам в исследовательской деятельности</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Искать в этой книге ..." aria-label="Искать в этой книге ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Предисловие
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_intro.html">
   Освоение рабочей среды
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_python.html">
     Освоение языка Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_sreda.html">
     Подготовка рабочего места
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_sredaonline.html">
     Онлайн-платформы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_nb.html">
     Создание нового блокнота
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_nb_cell.html">
     Операции с ячейками
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_nb_str.html">
     Строки в кавычках
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_nb_cycle.html">
     Циклы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_keyboard.html">
     Управление с клавиатуры
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_types.html">
     Разные типы - разное поведение!
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_task.html">
     Как работать с блокнотами упражнений?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_rename.html">
     Как переименовать блокнот?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_def.html">
     Функция
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_zaim.html">
     Заимствование кода
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_scriptwork.html">
     Выполнение практических работ на скриптовых языках
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_nbtips.html">
     Памятка
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="z_intro.html">
     * * *
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_stohastic.html">
   Стационарные стохастические процессы
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_empiric.html">
     Эмпирические распределения значений
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_data1.html">
     ✍ Получение набора данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_hist.html">
     Построение гистограммы распределения
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_random.html">
     Генератор случайных чисел
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_random.html">
     ☑ Генерация случайных выборок
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="pr_eda.html">
   Разведочный анализ
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_vector.html">
     Составные типы данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_dataset.html">
     Готовые наборы данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_pairplot.html">
     Структура данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_demographic.html">
     Сведенья о пациентах
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_standart.html">
     Cтандартизация данных
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Работа с таблицами
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_turtle.html">
     ☑ Подготовка данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="z_eda.html">
     * * *
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_linear.html">
   Линейные модели
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_dataset_rt.html">
     Формирование набора данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_normality.html">
     Проверка нормальности распределения
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_groupmean.html">
     Групповая статистика
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_combine.html">
     Объединение наборов данных
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_anova.html">
     Вариационный анализ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_granada.html">
     🗎 Сравнение выборок
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_logscale.html">
     Логарифмирование
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_modeline.html">
     🗎 Сравнение регрессионных моделей
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_retivo.html">
     Подбор параметров распределения
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_plan.html">
   Планирование экспериментов
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_power.html">
     Мощность исследования
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_quartile.html">
     Анализ публикационного ландшафта
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_artana.html">
     🗎 Анализ научной статьи
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_nonlinear.html">
   Нелинейные модели
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="w_data2.html">
     ✍ Получение набора данных 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_exp.html">
     Экспоненциальные рост и угасание
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_season.html">
     Сезонные колебания
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_ecg.html">
     Выделение событий в сигнале
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_wav.html">
     Визуализация аудиозаписи
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_spectral.html">
     Спектральный анализ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_spec.html">
     🗎 Спектральный анализ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_perehod.html">
     Переходные процессы
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_prognoz.html">
     Прогнозирование
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_gaupro.html">
     Компоненты нелинейного процесса
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_struct.html">
   Структурные модели
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_kiss.html">
     Дистанция между строками
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_seq.html">
     Обнаружение нарушений в структуре
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_clu.html">
     🗎 Кластерный анализ
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_matrix.html">
   Двумерные массивы данных
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_coordinates.html">
     Координаты
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_matrix.html">
     Операции с матрицами
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_dim.html">
     Увеличение размерности
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_pictu.html">
     Обработка изображений
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_pictu.html">
     🗎 Анализ изображения
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_proba.html">
   Вероятностные модели
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="i_sexproba.html">
     Случайность - двигатель прогресса?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_codon.html">
     Частоты кодонов
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_age_logistic.html">
     Скрининговая диагностика
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="i_epistat.html">
     Эпидемиологическая статистика
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="w_epistat.html">
     ☑ Динамика заболеваний
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="pr_qual.html">
   Квалиметрические модели
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="w_qual.html">
     🗎 Оценка качества
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pedagogic.html">
   Заметки для преподавателей
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   Список литературы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="annotation.html">
   Аннотация
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Переключить навигацию" aria-controls="site-navigation"
            title="Переключить навигацию" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Загрузите эту страницу"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/i_turtle.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Скачать исходный файл" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Распечатать в PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Полноэкранный режим"
                title="Полноэкранный режим"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/sherdim/mame/gh-pages?urlpath=notebooks/_sources/i_turtle.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Запуск Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Содержание
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Набор данных
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   Анализ полноты набора данных
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   Анализ корректности категорий
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   Расчёт соотношений показателей
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ssd">
   Расчет SSD
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   Перегруппировка
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>Работа с таблицами<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<p>В этой работе на примере набора данных для исследования полового диморфизма черепах мы потренируемся отвечать на вопросы, возникающие при первом знакомстве с большим сложным набором данных. Это вопросы о полноте данных, о количественном составе разных категориальных показателей, об экстремальных значениях.</p>
<div class="section" id="id2">
<h2>Набор данных<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p><a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%BE_%D0%A0%D0%B5%D0%BD%D1%87%D0%B0">Правило Ренча</a> (Rensch’s Rule)(положительная аллометрия полового диморфизма в размерах)
решили проверить на черепахах <span id="id3">[<a class="reference internal" href="references.html#id12"><span>RM17</span></a>]</span>. Для этого интегрировали данные из разных работ - в каких-то измерялись размеры и масса, в каких-то только размеры. Таблица неполная, так как информация по многим позициям отсутствует. Это пример реальных данных, с которыми приходится работать.</p>
<p>Набор данных представлен в исходном виде, в котором он находится в открытом доступе в виде приложения к публикации - это файл Excel <code class="docutils literal notranslate"><span class="pre">Data_S1_Complete_Dataset.xlsx</span></code> размером 95Кб.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#https://dfzljdn9uc3pi.cloudfront.net/2017/2914/1/Data_S1_Complete_Dataset.xlsx</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;d/Data_S1_Complete_Dataset.xlsx&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 692 entries, 0 to 691
Data columns (total 27 columns):
 #   Column                                        Non-Null Count  Dtype  
---  ------                                        --------------  -----  
 0   Carapace data used for phylogenetic analysis  241 non-null    object 
 1   Mass data used for phylogenetic analysis      146 non-null    object 
 2   Max mass used?                                9 non-null      object 
 3   Max SCL used?                                 19 non-null     object 
 4   Captive?                                      12 non-null     object 
 5   Combined populations?                         3 non-null      object 
 6   Genus                                         692 non-null    object 
 7   Species                                       692 non-null    object 
 8   Common Name                                   306 non-null    object 
 9   Family                                        692 non-null    object 
 10  M Mass (g)                                    297 non-null    float64
 11  F Mass (g)                                    297 non-null    float64
 12  N                                             446 non-null    object 
 13  Locality                                      289 non-null    object 
 14  M SCL (mm)                                    534 non-null    float64
 15  F SCL (mm)                                    537 non-null    float64
 16  M Max Mass (g)                                126 non-null    float64
 17  F Max Mass (g)                                127 non-null    float64
 18  Pop Max Mass (g)                              113 non-null    float64
 19  M Max SCL (mm)                                271 non-null    float64
 20  F Max SCL (mm)                                272 non-null    float64
 21  Pop Max SCL (mm)                              125 non-null    float64
 22  KWR notes                                     71 non-null     object 
 23  Mass Source                                   311 non-null    object 
 24  SCL Original Source                           381 non-null    object 
 25  SCL Dataset Source                            381 non-null    object 
 26  secondary mass source                         3 non-null      object 
dtypes: float64(10), object(17)
memory usage: 146.1+ KB
</pre></div>
</div>
</div>
</div>
<p>В таблице 692 записи со значениями в 27 колонках.</p>
<p>Из сводки по колонкам по количеству ненулевых значений (non-null) можно видеть, что полностью заполнены лишь Family (Семейство), Genus (Род) и Species (Вид).
Остальные колонки заполнены частично.</p>
<p>Посмотрим список мест сбора данных.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">Locality</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Orang National Park, Assam state, India                                  15
Bangladesh                                                                8
Madagascar                                                                6
Savannah River Plant and Capers Island, South Carolina                    6
Papua Province, New Guinea Island, Indonesia                              6
                                                                         ..
Kimberley, South Africa                                                   1
Carrizo Plain Ecological Reserve, San Luis Obisipo County, California     1
Beaver Creek, Tar Creek Superfund Site, Ottawa County, Oklahoma           1
Anakao, Atsimo-Andrefana region, Madagascar                               1
Egmont Key island, Tampa Bay, Florida 27°36&#39;04&quot;N 82°45&#39;40&quot;W               1
Name: Locality, Length: 226, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>На выходе мы получили серию (<code class="docutils literal notranslate"><span class="pre">pandas.Series</span></code>) с частотой упоминания в таблице отдельных мест (Locality), а в качестве индекса к этим значениям использованы названия этих мест.</p>
<p>Сколько всего раз встречается Бразилия?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#_ - это ссылка на вывод из предыдущей ячейки</span>
<span class="n">_</span><span class="p">[</span><span class="n">_</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Brazil&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># теперь временная переменная _ занята выводом предыдущей ячейки = 22</span>
<span class="c1"># для ссылки на вывод из предпредыдущей ячейки используйте __</span>
<span class="n">__</span><span class="p">[</span><span class="n">__</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;India&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>23
</pre></div>
</div>
</div>
</div>
<p>Чтобы не путаться во временных переменных - лучше ссылаться на исходные переменные, или создавать временные переменные с понятным именем.</p>
<p>В следующей ячейке выборку по условию присутствия в строке Locality подстроки „Turk“ мы сохраняем в переменную (подставляем слева от работающего выражения имя переменной и <code class="docutils literal notranslate"><span class="pre">=</span></code>.
Во второй строке мы повторяем имя переменной, чтобы сразу вывести на экран содержимое полученной переменной.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cherepashki_Turkii</span> <span class="o">=</span> <span class="n">D</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">Locality</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Turk&#39;</span><span class="p">)</span><span class="o">==</span><span class="kc">True</span><span class="p">]</span>
<span class="n">Cherepashki_Turkii</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Carapace data used for phylogenetic analysis</th>
      <th>Mass data used for phylogenetic analysis</th>
      <th>Max mass used?</th>
      <th>Max SCL used?</th>
      <th>Captive?</th>
      <th>Combined populations?</th>
      <th>Genus</th>
      <th>Species</th>
      <th>Common Name</th>
      <th>Family</th>
      <th>...</th>
      <th>F Max Mass (g)</th>
      <th>Pop Max Mass (g)</th>
      <th>M Max SCL (mm)</th>
      <th>F Max SCL (mm)</th>
      <th>Pop Max SCL (mm)</th>
      <th>KWR notes</th>
      <th>Mass Source</th>
      <th>SCL Original Source</th>
      <th>SCL Dataset Source</th>
      <th>secondary mass source</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>195</th>
      <td>yes</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Emys</td>
      <td>orbicularis</td>
      <td>European Pond Turtle</td>
      <td>Emydidae</td>
      <td>...</td>
      <td>750.7</td>
      <td>750.7</td>
      <td>156.8</td>
      <td>166.6</td>
      <td>166.6</td>
      <td>NaN</td>
      <td>Ayaz, D., Fritz, U., Atatur, M. K., Mermer, A....</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>196</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Emys</td>
      <td>orbicularis</td>
      <td>European pond turtle</td>
      <td>Emydidae</td>
      <td>...</td>
      <td>680.0</td>
      <td>680.0</td>
      <td>138.0</td>
      <td>162.0</td>
      <td>162.0</td>
      <td>NaN</td>
      <td>Auer, M., and E. Taskavak. 2004. Population St...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>403</th>
      <td>yes</td>
      <td>yes</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mauremys</td>
      <td>rivulata</td>
      <td>Western Caspian turtle</td>
      <td>Geoemydidae</td>
      <td>...</td>
      <td>823.0</td>
      <td>823.0</td>
      <td>142.0</td>
      <td>18.1</td>
      <td>18.1</td>
      <td>NaN</td>
      <td>Güçlü, O., and O. Türkozan. 2010. Population S...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>404</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mauremys</td>
      <td>rivulata</td>
      <td>Western Caspian turtle</td>
      <td>Geoemydidae</td>
      <td>...</td>
      <td>878.0</td>
      <td>878.0</td>
      <td>205.0</td>
      <td>188.0</td>
      <td>205.0</td>
      <td>NaN</td>
      <td>Auer, M., and E. Taskavak. 2004. Population St...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>633</th>
      <td>NaN</td>
      <td>yes</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Agrionemys</td>
      <td>horsfieldii</td>
      <td>Central Asian tortoise</td>
      <td>Testudinidae</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Ataev, C.A. 1997. Reptiles of the autonomous r...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 27 columns</p>
</div></div></div>
</div>
<p>По размеру выборки понятно, что найдено 5 записей, соответствующих запросу.</p>
<p>Чтобы получить информацию по конкретной записи можно использовать индекс. В данном случае индекс строчки - это ее номер, а индекс колонки - это ее название.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">633</span><span class="p">,</span> <span class="s1">&#39;Mass Source&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Ataev, C.A. 1997. Reptiles of the autonomous republic of Turkmenistan. Chelonian Conservation and Biology 2:627-634.&#39;
</pre></div>
</div>
</div>
</div>
<p>Для удобства можно указывать только список нужных колонок, выписав их в отдельную переменную.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kk</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Genus&#39;</span><span class="p">,</span><span class="s1">&#39;Species&#39;</span><span class="p">,</span><span class="s1">&#39;Common Name&#39;</span><span class="p">,</span><span class="s1">&#39;Family&#39;</span><span class="p">,</span><span class="s1">&#39;M Mass (g)&#39;</span><span class="p">,</span><span class="s1">&#39;F Mass (g)&#39;</span><span class="p">,</span><span class="s1">&#39;N&#39;</span><span class="p">,</span><span class="s1">&#39;Locality&#39;</span><span class="p">,</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;Mass Source&#39;</span><span class="p">]</span>
<span class="n">D</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">633</span><span class="p">,</span><span class="n">kk</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Genus                                                 Agrionemys
Species                                              horsfieldii
Common Name                               Central Asian tortoise
Family                                              Testudinidae
M Mass (g)                                                 684.5
F Mass (g)                                                1223.0
N                                                            NaN
Locality                                            Turkmenistan
M SCL (mm)                                                   NaN
F SCL (mm)                                                   NaN
Mass Source    Ataev, C.A. 1997. Reptiles of the autonomous r...
Name: 633, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Для выборки центральноазиатских черепах, описанной в работе Атаева (1997), указываются только средние показатели массы самок и самцов, а измерений длины карапакса (<code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">SCL</span> <span class="pre">(mm)</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span> <span class="pre">SCL</span> <span class="pre">(mm)</span></code>)  нет, поэтому на месте отсутствующих данных специальное число без значения <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<p>Также использование подстрок для поиска по текстовым колонкам надо использовать с осторожностью. Для точности вместо одной короткой подстроки иногда может потребоваться использовать несколько запросов с длинной подстрокой, например, «Turkey» и «Turkish».</p>
<p>Кроме средних значений размеров и массы, которые использованы для проверки правила Ренча, интерес представляют колонки с максимально зарегистрированным размером для особей разных полов и для популяций в целом.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">M</span> <span class="n">Max</span> <span class="n">Mass</span> <span class="p">(</span><span class="n">g</span><span class="p">)</span>                                  <span class="mi">126</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span>
<span class="n">F</span> <span class="n">Max</span> <span class="n">Mass</span> <span class="p">(</span><span class="n">g</span><span class="p">)</span>                                  <span class="mi">127</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span>
<span class="n">Pop</span> <span class="n">Max</span> <span class="n">Mass</span> <span class="p">(</span><span class="n">g</span><span class="p">)</span>                                <span class="mi">113</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span>
<span class="n">M</span> <span class="n">Max</span> <span class="n">SCL</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>                                  <span class="mi">271</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span>
<span class="n">F</span> <span class="n">Max</span> <span class="n">SCL</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>                                  <span class="mi">272</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span>
<span class="n">Pop</span> <span class="n">Max</span> <span class="n">SCL</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>                                <span class="mi">125</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span> <span class="n">float64</span> 
</pre></div>
</div>
<p>Прочие колонки (первые шесть и последние 5) содержат информацию с уточнением обстоятельств получения данных для данных случаев.
Это так называемая <em>мета-информация</em>.
Малоинформативные колонки можно вообще удалить из рабочей таблицы на время анализа.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">=</span><span class="n">D</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>Анализ полноты набора данных<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для анализа полового диморфизма каждая запись о популяции должна содержать размер женской особи и мужской особи.</p>
<p><strong>Вопрос: сколько размеров без пары?</strong></p>
<p>Первая проверка, сколько мужских без женских?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">[</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Genus</th>
      <th>Species</th>
      <th>Common Name</th>
      <th>Family</th>
      <th>M Mass (g)</th>
      <th>F Mass (g)</th>
      <th>N</th>
      <th>Locality</th>
      <th>M SCL (mm)</th>
      <th>F SCL (mm)</th>
      <th>M Max Mass (g)</th>
      <th>F Max Mass (g)</th>
      <th>Pop Max Mass (g)</th>
      <th>M Max SCL (mm)</th>
      <th>F Max SCL (mm)</th>
      <th>Pop Max SCL (mm)</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div></div></div>
</div>
<p>Вторая проверка, сколько женских без мужских?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">[</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Genus</th>
      <th>Species</th>
      <th>Common Name</th>
      <th>Family</th>
      <th>M Mass (g)</th>
      <th>F Mass (g)</th>
      <th>N</th>
      <th>Locality</th>
      <th>M SCL (mm)</th>
      <th>F SCL (mm)</th>
      <th>M Max Mass (g)</th>
      <th>F Max Mass (g)</th>
      <th>Pop Max Mass (g)</th>
      <th>M Max SCL (mm)</th>
      <th>F Max SCL (mm)</th>
      <th>Pop Max SCL (mm)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>156</th>
      <td>Cycloderma</td>
      <td>frenatum</td>
      <td>Zambezi flapshell turtle</td>
      <td>Trionychidae</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1M, 1F</td>
      <td>Zambezi River, southern Africa</td>
      <td>NaN</td>
      <td>560.0</td>
      <td>13500.0</td>
      <td>11400.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>466</th>
      <td>Pelomedusa</td>
      <td>subrufa</td>
      <td>helmeted turtle</td>
      <td>Pelomedusidae</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Sub-Saharan Africa</td>
      <td>NaN</td>
      <td>290.0</td>
      <td>3000.0</td>
      <td>2200.0</td>
      <td>3000.0</td>
      <td>325.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>471</th>
      <td>Pelusios</td>
      <td>adansonii</td>
      <td>Adanson's turtle</td>
      <td>Pelomedusidae</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Senegal</td>
      <td>NaN</td>
      <td>220.0</td>
      <td>650.0</td>
      <td>1620.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>238.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3, 16)
</pre></div>
</div>
</div>
</div>
<p>В трех случаях указаны только женские размеры.
Для Pelomedusa 	subrufa (№ 466) правда указан максимальный размер самца.</p>
<p>Можно заметить, что все три вида - морские черепахи. Поэтому становится понятным почему нет самцов.
Вероятно, замеры самок производились во время кладки яиц, когда самки черепах выползают из воды на песок. Самцы же в это время плавали где-то в море.</p>
</div>
<div class="section" id="id5">
<h2>Анализ корректности категорий<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для сравнительного анализа часто необходимо группировать наблюдения. В этом наборе данных группировку логично делать по систематическому признаку - Семейству (Family).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Carettochelyidae      4
Chelidae             87
Cheloniidae          17
Chelydridae          13
Chelydridae           2
Dermatemydidae        5
Dermochelyidae        3
Emydidae            157
Geoemydidae         114
Kinosternidae        66
Pelomedusidae        10
Platysternidae        2
Podocnemididae       22
Testudinidae        157
Trionychidae         33
Name: Family, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Обратите внимание, что Chelydridae встречаются два раза. Это означает, что эти названия различаются на один невидимый символ.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Chelidae&#39;, &#39;Emydidae&#39;, &#39;Testudinidae&#39;, &#39;Trionychidae&#39;,
       &#39;Geoemydidae&#39;, &#39;Cheloniidae&#39;, &#39;Carettochelyidae&#39;, &#39;Chelydridae &#39;,
       &#39;Chelydridae&#39;, &#39;Kinosternidae&#39;, &#39;Dermatemydidae&#39;, &#39;Dermochelyidae&#39;,
       &#39;Podocnemididae&#39;, &#39;Pelomedusidae&#39;, &#39;Platysternidae&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Отбираем все с ошибочным написанием и заменяем значение в колонке Family на правильное.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">==</span><span class="s1">&#39;Chelydridae &#39;</span><span class="p">,</span><span class="s1">&#39;Family&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;Chelydridae&#39;</span>

<span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Chelidae&#39;, &#39;Emydidae&#39;, &#39;Testudinidae&#39;, &#39;Trionychidae&#39;,
       &#39;Geoemydidae&#39;, &#39;Cheloniidae&#39;, &#39;Carettochelyidae&#39;, &#39;Chelydridae&#39;,
       &#39;Kinosternidae&#39;, &#39;Dermatemydidae&#39;, &#39;Dermochelyidae&#39;,
       &#39;Podocnemididae&#39;, &#39;Pelomedusidae&#39;, &#39;Platysternidae&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Если посмотреть на ту же проблему с названиями родов, то окажется, что это типичная ситуация для этой таблицы.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">Genus</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>  <span class="c1">#проверяем, что строка с названием рода оканчивается пробелом</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>131
</pre></div>
</div>
</div>
</div>
<p>Примерно каждое пятое название рода оканчивается пробелом. Т.е. авторы не придавали этому значения. Когда строки содержат пробелы спереди или сзади как правило это не влияет на их смысловое содержание. Для обрезания крайних пробелов существует специальная функция <code class="docutils literal notranslate"><span class="pre">strip()</span></code>, после применения которой дублей не остаётся.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">unique</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">Genus</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Acanthochelys&#39;, &#39;Agrionemys&#39;, &#39;Apalone&#39;, &#39;Aspideretes&#39;,
       &#39;Astrochelys&#39;, &#39;Batagur&#39;, &#39;Caretta&#39;, &#39;Carettochelys&#39;, &#39;Chelodina&#39;,
       &#39;Chelonia&#39;, &#39;Chelonoidis&#39;, &#39;Chelus&#39;, &#39;Chelydra&#39;, &#39;Chersina&#39;,
       &#39;Chitra&#39;, &#39;Chrysemys&#39;, &#39;Claudius&#39;, &#39;Clemmys&#39;, &#39;Cuora&#39;, &#39;Cyclemys&#39;,
       &#39;Cycloderma&#39;, &#39;Deirochelys&#39;, &#39;Dermatemys&#39;, &#39;Dermochelys&#39;,
       &#39;Dipsochelys&#39;, &#39;Dogania&#39;, &#39;Elseya&#39;, &#39;Elusor&#39;, &#39;Emydura&#39;, &#39;Emys&#39;,
       &#39;Eretmochelys&#39;, &#39;Erymnochelys&#39;, &#39;Geochelone&#39;, &#39;Geoclemys&#39;,
       &#39;Glyptemys&#39;, &#39;Gopherus&#39;, &#39;Graptemys&#39;, &#39;Hardella&#39;, &#39;Heosemys&#39;,
       &#39;Homopus&#39;, &#39;Hydromedusa&#39;, &#39;Indotestudo&#39;, &#39;Kinixys&#39;, &#39;Kinosternon&#39;,
       &#39;Kinosternum&#39;, &#39;Lepidochelys&#39;, &#39;Leucocephalon&#39;, &#39;Lissemys&#39;,
       &#39;Macrochelys&#39;, &#39;Malaclemys&#39;, &#39;Malacochersus&#39;, &#39;Malayemys&#39;,
       &#39;Manouria&#39;, &#39;Mauremys&#39;, &#39;Melanochelys&#39;, &#39;Mesoclemmys&#39;, &#39;Morenia&#39;,
       &#39;Myuchelys&#39;, &#39;Nilssonia&#39;, &#39;Notochelys&#39;, &#39;Palea&#39;, &#39;Pangshura&#39;,
       &#39;Pelodiscus&#39;, &#39;Pelomedusa&#39;, &#39;Peltocephalus&#39;, &#39;Pelusios&#39;,
       &#39;Phrynops&#39;, &#39;Platemys&#39;, &#39;Platysternon&#39;, &#39;Podocnemis&#39;, &#39;Podocnemus&#39;,
       &#39;Psammobates&#39;, &#39;Pseudemydura&#39;, &#39;Pseudemys&#39;, &#39;Pyxis&#39;, &#39;Rheodytes&#39;,
       &#39;Rhinemys&#39;, &#39;Rhinoclemmys&#39;, &#39;Sacalia&#39;, &#39;Siebenrockiella&#39;,
       &#39;Staurotypus&#39;, &#39;Sternotherus&#39;, &#39;Stigmochelys&#39;, &#39;Terrapene&#39;,
       &#39;Testudo&#39;, &#39;Trachemys&#39;, &#39;Vijayachelys&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>В подобном случае операцию приведения строк в порядок можно делать сразу после загрузки набора данных. Например, поменять все значения из колонки на эти же значения, но исправленные.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">Genus</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">Genus</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p>Похожие операции стандартизации могут потребовать нестандартные сокращения, нестандартные указания даты и времени, строки с разным регистром символов и др.</p>
<p>После «ремонта» набора данных его желательно сохранить в файле с другим именем для дальнейшей работы. Мы этого делать не будем, поскольку преследуем учебные цели.</p>
</div>
<div class="section" id="id6">
<h2>Расчёт соотношений показателей<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h2>
<p><a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%BE_%D0%A0%D0%B5%D0%BD%D1%87%D0%B0">Правило Ренча</a> (Rensch’s Rule)  - пример <a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%BB%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F">аллометрии</a>.
В 1950 году Rensch впервые описал, что в группах родственных видов половой диморфизм в размерах тела более выражен у крупных видов.</p>
<p>Были найдены исключения. Например, правило Ренча не соблюдается у сов
<span id="id7">[<a class="reference internal" href="references.html#id13"><span>AF97</span></a>]</span>.
У птиц выраженность полового диморфизма была связана с половым отбором.
Если поделить на группы по системе спаривания, то правило выражено только у многоженцев (Polygyny)
<span id="id8">[<a class="reference internal" href="references.html#id14"><span>DDF+07</span></a>]</span>
(<a class="reference internal" href="#rench-birds"><span class="std std-numref">Рис. 8</span></a>).</p>
<div class="figure align-default" id="rench-birds">
<img alt="" src="_images/rench_birds.jpg" />
<p class="caption"><span class="caption-number">Рис. 8 </span><span class="caption-text">Стандартизированный размерный диморфизм (log male wing length−log female wing length) по сравнению с размером самцов в подсемействах с различными системами спаривания. Полигиния связана с положительной аллометрией (т. е. наклон графиков &gt; 0 ), а полиандрия связана с отрицательной аллометрией (т. е. наклоны &lt; 0).</span><a class="headerlink" href="#rench-birds" title="Постоянная ссылка на рисунок">¶</a></p>
</div>
<p>Для визуализации соотношения между показателями используют скаттерограмму. Сопоставим размеры мужских и женских карапаксов для одного из семейств - Сухопутные черепахи.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D1</span> <span class="o">=</span> <span class="n">D</span><span class="p">[(</span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">==</span><span class="s1">&#39;Testudinidae&#39;</span><span class="p">)]</span>
<span class="n">D1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">);</span>
<span class="n">title</span><span class="p">(</span><span class="s1">&#39;Размеры сухопутных черепах&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_46_0.png" src="_images/i_turtle_46_0.png" />
</div>
</div>
<p>Видно, что крупные виды c панцирем более полуметра сильно выпадают из группы. Чтобы смягчить различия зададим логарифмическую шкалу.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">loglog</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
<span class="n">title</span><span class="p">(</span><span class="s1">&#39;Размеры сухопутных черепах в логарифмической шкале&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_48_0.png" src="_images/i_turtle_48_0.png" />
</div>
</div>
<p>Факт наличия специального параметра для отображения логарифмических шкал говорит о том, что логарифмирование является стандартным приёмом при разведочном анализе данных.</p>
</div>
<div class="section" id="ssd">
<h2>Расчет SSD<a class="headerlink" href="#ssd" title="Ссылка на этот заголовок">¶</a></h2>
<div class="math notranslate nohighlight">
\[  SSD = log(X_{male}) - log(X_{female})\]</div>
<p>Согласно правилу Ренча sexual size dimorphism (SSD) зависит от общего размера тела в группе близкородственных видов. (Если самец крупнее - SSD растет, и наоборот).</p>
<p>Рассчитаем диморфизм для длины карапакса и для массы.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;SSD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">])</span>
<span class="n">D</span><span class="p">[</span><span class="s1">&#39;SSD_mass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;M Mass (g)&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;F Mass (g)&#39;</span><span class="p">])</span>
<span class="n">D</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="s1">&#39;SSD&#39;</span><span class="p">,</span><span class="s1">&#39;SSD_mass&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_52_0.png" src="_images/i_turtle_52_0.png" />
</div>
</div>
<p>Создадим колонки с логарифмированными значениями для задания оси абсцисс в будущем рисунке.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;log_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">])</span>
<span class="n">D</span><span class="p">[</span><span class="s1">&#39;log_mass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">log</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;M Mass (g)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Построим линейные зависимости по семействам. Посчитаем, сколько видов с данными есть по каждому семейству.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kk</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;M SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;F SCL (mm)&#39;</span><span class="p">,</span><span class="s1">&#39;M Mass (g)&#39;</span><span class="p">,</span><span class="s1">&#39;F Mass (g)&#39;</span><span class="p">]</span>
<span class="n">D</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Family&#39;</span><span class="p">)[</span><span class="n">kk</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M SCL (mm)</th>
      <th>F SCL (mm)</th>
      <th>M Mass (g)</th>
      <th>F Mass (g)</th>
    </tr>
    <tr>
      <th>Family</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Carettochelyidae</th>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Chelidae</th>
      <td>74</td>
      <td>74</td>
      <td>34</td>
      <td>34</td>
    </tr>
    <tr>
      <th>Cheloniidae</th>
      <td>15</td>
      <td>15</td>
      <td>6</td>
      <td>6</td>
    </tr>
    <tr>
      <th>Chelydridae</th>
      <td>9</td>
      <td>9</td>
      <td>10</td>
      <td>10</td>
    </tr>
    <tr>
      <th>Dermatemydidae</th>
      <td>2</td>
      <td>2</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>Dermochelyidae</th>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Emydidae</th>
      <td>118</td>
      <td>118</td>
      <td>69</td>
      <td>69</td>
    </tr>
    <tr>
      <th>Geoemydidae</th>
      <td>99</td>
      <td>99</td>
      <td>47</td>
      <td>47</td>
    </tr>
    <tr>
      <th>Kinosternidae</th>
      <td>50</td>
      <td>50</td>
      <td>21</td>
      <td>21</td>
    </tr>
    <tr>
      <th>Pelomedusidae</th>
      <td>3</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Platysternidae</th>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Podocnemididae</th>
      <td>20</td>
      <td>20</td>
      <td>10</td>
      <td>10</td>
    </tr>
    <tr>
      <th>Testudinidae</th>
      <td>112</td>
      <td>112</td>
      <td>78</td>
      <td>78</td>
    </tr>
    <tr>
      <th>Trionychidae</th>
      <td>25</td>
      <td>26</td>
      <td>14</td>
      <td>14</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Оставим только те семейства, в которых представлено более, чем 5 видов.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">popular_family</span> <span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="n">_</span><span class="p">[</span><span class="s1">&#39;M Mass (g)&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">popular_family</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;Chelidae&#39;, &#39;Cheloniidae&#39;, &#39;Chelydridae&#39;, &#39;Emydidae&#39;, &#39;Geoemydidae&#39;,
       &#39;Kinosternidae&#39;, &#39;Podocnemididae&#39;, &#39;Testudinidae&#39;, &#39;Trionychidae&#39;],
      dtype=&#39;object&#39;, name=&#39;Family&#39;)
</pre></div>
</div>
</div>
</div>
<p>Отберем выборку представителей только этих семейств. Будьте внимательны, если создаете переменные, отличающиеся всего на один символ (тут добавлен знак подчеркивания).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D_</span> <span class="o">=</span> <span class="n">D</span><span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">popular_family</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_size&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D_</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Family&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_61_0.png" src="_images/i_turtle_61_0.png" />
</div>
</div>
<p>Как видно из рисунка в большинстве семейств правило Ренча соблюдается - линия тренда идет вверх при увеличении размера. У некоторых семейств (Podocnemididae) зависимость выражена слабо, и у одного (Cheloniidae) - слабо-отрицательная.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_mass&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD_mass&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D_</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Family&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_63_0.png" src="_images/i_turtle_63_0.png" />
</div>
</div>
<p>Сходная картина с межполовыми различиями в массе.</p>
<p>Степень выраженности аллометрического правила оценивают по углу наклона линии тренда - или коэффициенту <span class="math notranslate nohighlight">\(a\)</span> в уравнении <span class="math notranslate nohighlight">\(y= ax+b\)</span>.</p>
</div>
<div class="section" id="id9">
<h2>Перегруппировка<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h2>
<p>Попробуем проверить пару гипотез, связано ли соблюдение правила Ренча с образом жизни и с типом складывания шеи (подотряды).
Для этого нам надо создать новые колонки с факторами.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Chelidae&#39;, &#39;Emydidae&#39;, &#39;Testudinidae&#39;, &#39;Trionychidae&#39;,
       &#39;Geoemydidae&#39;, &#39;Cheloniidae&#39;, &#39;Carettochelyidae&#39;, &#39;Chelydridae&#39;,
       &#39;Kinosternidae&#39;, &#39;Dermatemydidae&#39;, &#39;Dermochelyidae&#39;,
       &#39;Podocnemididae&#39;, &#39;Pelomedusidae&#39;, &#39;Platysternidae&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Для пометки водные или не водные заведем указатель со всеми семействами. Значения фактора зададим:</p>
<ul class="simple">
<li><p>m - морские</p></li>
<li><p>r - пресноводные (речные)</p></li>
<li><p>s - сухопутные.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="s1">&#39;mrsr&#39;</span> <span class="s1">&#39;rmrs&#39;</span> <span class="s1">&#39;rrm&#39;</span> <span class="s1">&#39;rrr&#39;</span><span class="p">))</span>
<span class="n">d</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Chelidae&#39;: &#39;m&#39;,
 &#39;Emydidae&#39;: &#39;r&#39;,
 &#39;Testudinidae&#39;: &#39;s&#39;,
 &#39;Trionychidae&#39;: &#39;r&#39;,
 &#39;Geoemydidae&#39;: &#39;r&#39;,
 &#39;Cheloniidae&#39;: &#39;m&#39;,
 &#39;Carettochelyidae&#39;: &#39;r&#39;,
 &#39;Chelydridae&#39;: &#39;s&#39;,
 &#39;Kinosternidae&#39;: &#39;r&#39;,
 &#39;Dermatemydidae&#39;: &#39;r&#39;,
 &#39;Dermochelyidae&#39;: &#39;m&#39;,
 &#39;Podocnemididae&#39;: &#39;r&#39;,
 &#39;Pelomedusidae&#39;: &#39;r&#39;,
 &#39;Platysternidae&#39;: &#39;r&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;vita&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="n">s</span><span class="p">])</span>
<span class="n">D</span><span class="p">[</span><span class="s1">&#39;vita&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>r    413
s    172
m    107
Name: vita, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Подотряд можно задать сопоставлением каждого семейства со своим подотрядом, но поскольку у Черепах подотряда всего два, то можно проверить принадлежность к одному из трёх семейств бокошейных, и если нет, то к скрытошейным.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">podotryad</span><span class="p">(</span><span class="n">fam</span><span class="p">):</span>
    <span class="n">subordo</span> <span class="o">=</span> <span class="s1">&#39;Pleurodira&#39;</span> <span class="k">if</span> <span class="n">fam</span> <span class="ow">in</span> <span class="p">(</span>
          <span class="s1">&#39;Podocnemididae&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Pelomedusidae&#39;</span><span class="p">,</span> <span class="c1">#Пеломедузовые</span>
          <span class="s1">&#39;Chelidae&#39;</span>  <span class="c1">#Змеиношейные</span>
        <span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;Cryptodira&#39;</span>
    
    <span class="k">return</span> <span class="n">subordo</span>

<span class="n">D</span><span class="p">[</span><span class="s1">&#39;Subordo&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">D</span><span class="o">.</span><span class="n">Family</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">podotryad</span><span class="p">)</span>
<span class="n">D</span><span class="p">[</span><span class="s1">&#39;Subordo&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cryptodira    573
Pleurodira    119
Name: Subordo, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Повторим построение рисунков с вновь добавленными факторами.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_size&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Subordo&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_73_0.png" src="_images/i_turtle_73_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_mass&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD_mass&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Subordo&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_74_0.png" src="_images/i_turtle_74_0.png" />
</div>
</div>
<p>Хотя у Скрытошейных намечается положительный наклон зависимости, облако значений достаточно рыхлое, особенно в области низких значений массы.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_size&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;vita&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_76_0.png" src="_images/i_turtle_76_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_mass&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;SSD_mass&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;vita&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/i_turtle_77_0.png" src="_images/i_turtle_77_0.png" />
</div>
</div>
<p>При группировке по образу жизни чётко обособляется группа сухопутных черепах с сильно выраженной аллометрией. У мелких видов самцы всегда мельче (показатель ниже 0), у крупных - самцы всегда больше (показатель больше 0). При средних размерах встречаются разные варианты.
У черепах, живущих в воде, фактор размера видимо менее значим, поскольку нет необходимости перемещения тяжелого панциря на ногах.</p>
<p>После получения качественного решения можно получить количественные значения коэффициентов отобранных моделей зависимостей. Для этого для каждой группы нужно сделать анализ с помощью функции <code class="docutils literal notranslate"><span class="pre">polyfit</span></code> или пакета <code class="docutils literal notranslate"><span class="pre">statmodels</span></code>, с которыми мы познакомимся в следующих разделах.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="i_standart.html" title="previous page">Cтандартизация данных</a>
    <a class='right-next' id="next-link" href="w_turtle.html" title="next page">☑ Подготовка данных</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Дмитрий Н. Щербина<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>